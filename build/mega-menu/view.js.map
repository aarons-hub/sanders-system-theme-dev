{"version":3,"file":"mega-menu/view.js","mappings":"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","sources":["webpack://theme-mega-menu/./src/mega-menu/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n/* eslint-disable no-console */\n/* eslint-enable no-console */\n\n// Theme mega menu close button: set aria-expanded to false on click (robust, supports multiple close button classes)\n(function () {\n\tdocument.addEventListener(\"DOMContentLoaded\", function () {\n\t\t// Inject mega-menu-backdrop div after <body> tag\n\t\tif (!document.querySelector(\".mega-menu-backdrop\")) {\n\t\t\tvar backdropDiv = document.createElement(\"div\");\n\t\t\tbackdropDiv.className = \"mega-menu-backdrop\";\n\t\t\tdocument.body.insertBefore(backdropDiv, document.body.firstChild);\n\t\t}\n\t\tconst backdrop = document.querySelector(\".mega-menu-backdrop\");\n\t\tfunction updateBackdrop() {\n\t\t\tconst anyOpen = document.querySelector(\n\t\t\t\t'.mega-menu-button[aria-expanded=\"true\"]',\n\t\t\t);\n\t\t\tif (backdrop) {\n\t\t\t\tif (anyOpen) {\n\t\t\t\t\tbackdrop.classList.add(\"active\");\n\t\t\t\t} else {\n\t\t\t\t\tbackdrop.classList.remove(\"active\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdocument.body.addEventListener(\"click\", function (e) {\n\t\t\t// Toggle aria-expanded for mega menu button (including mobile)\n\t\t\tif (e.target && e.target.classList.contains(\"mega-menu-button\")) {\n\t\t\t\tvar isExpanded = e.target.getAttribute(\"aria-expanded\") === \"true\";\n\t\t\t\te.target.setAttribute(\"aria-expanded\", (!isExpanded).toString());\n\t\t\t\tsetTimeout(updateBackdrop, 10);\n\t\t\t}\n\t\t\t// Always set aria-expanded to false for close buttons\n\t\t\tif (\n\t\t\t\te.target &&\n\t\t\t\t(e.target.classList.contains(\"theme-mega-menu-close-button\") ||\n\t\t\t\t\te.target.classList.contains(\"menu-container__close-button\"))\n\t\t\t) {\n\t\t\t\t// Try to find the closest mega menu item (desktop)\n\t\t\t\tvar menuItem = e.target.closest(\".mega-menu-item\");\n\t\t\t\tif (menuItem) {\n\t\t\t\t\tvar button = menuItem.querySelector(\".mega-menu-button\");\n\t\t\t\t\tif (button) {\n\t\t\t\t\t\tbutton.setAttribute(\"aria-expanded\", \"false\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Try to find the closest mobile menu item (mobile)\n\t\t\t\tvar mobileMenuItem = e.target.closest(\".theme-mobile-menu-item\");\n\t\t\t\tif (mobileMenuItem) {\n\t\t\t\t\tvar mobileButton = mobileMenuItem.querySelector(\n\t\t\t\t\t\t\".mega-menu-button.mobile\",\n\t\t\t\t\t);\n\t\t\t\t\tif (mobileButton) {\n\t\t\t\t\t\tmobileButton.setAttribute(\"aria-expanded\", \"false\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsetTimeout(updateBackdrop, 10);\n\t\t\t}\n\t\t\t// Hide all menus if backdrop is clicked\n\t\t\tif (backdrop && e.target === backdrop) {\n\t\t\t\tconst openButtons = document.querySelectorAll(\n\t\t\t\t\t'.mega-menu-button[aria-expanded=\"true\"]',\n\t\t\t\t);\n\t\t\t\topenButtons.forEach((btn) =>\n\t\t\t\t\tbtn.setAttribute(\"aria-expanded\", \"false\"),\n\t\t\t\t);\n\t\t\t\tsetTimeout(updateBackdrop, 10);\n\t\t\t}\n\t\t});\n\t});\n})();\n"],"names":["document","addEventListener","querySelector","backdropDiv","createElement","className","body","insertBefore","firstChild","backdrop","updateBackdrop","anyOpen","classList","add","remove","e","target","contains","isExpanded","getAttribute","setAttribute","toString","setTimeout","menuItem","closest","button","mobileMenuItem","mobileButton","openButtons","querySelectorAll","forEach","btn"],"ignoreList":[],"sourceRoot":""}